<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Metode Inferensi</title>
</head>
	
<body>
	<h2>Metode Inferensi</h2>

	<table>
		<tr>
			<td><a>Pilih Mode</a></td>
			<td><a> : </a></td>
			<td>
				<select id="IptMode">
					<option value="1" selected>Modus Ponens</option>
					<option value="2">Modus Tollens</option>
					<option value="3">Equivalence Elimination</option>
				</select>
			</td>
		</tr>
		<tr>
			<td><a>Premis 1</a></td>
			<td><a> : </a></td>
			<td><input type="text" id="IptPremis1"></td>
		</tr>
		<tr>
			<td><a>Premis 2</a></td>
			<td><a> : </a></td>
			<td><input type="text" id="IptPremis2"></td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td><input type="button" onclick="myFunction()" value="Submit"></td>
		</tr>
	</table>
	<br>
	<table>
		<tr>
			<td><a>Premis 1</a></td>
			<td><a> : </a></td>
			<td><a id="premis1"></a></td>
		</tr>
		<tr>
			<td><a>Premis 2</a></td>
			<td><a> : </a></td>
			<td><a id="premis2"></a></td>
		</tr>
		<tr>
			<td><a>Konklusi</a></td>
			<td><a> : </a></td>
			<td><a id="konklusi"></a></td>
		</tr>
	</table>
	
	<p id="errMsg"> </p>

	<script>
	function myFunction() {
		var str1 = document.getElementById('IptPremis1').value;
		var str2 = document.getElementById('IptPremis2').value;
		var mode = document.getElementById('IptMode').value;
		
		if(str1.length == 0 || str2.length == 0 ){
			document.getElementById("errMsg").innerHTML = "Form tidak boleh kosong!";
		}else{
			document.getElementById("errMsg").innerHTML = " ";
		}
		
		if(mode == 1 ){
			modusPonens(str1, str2);
		}else if(mode == 2){
			modusTollens(str1, str2);
		}else if(mode > 1){
			document.getElementById("errMsg").innerHTML = "Under Progress!";
		}
	}
	</script>


	<!-- algoritma dibawah adalah modus Ponens ===================== -->
	<script src="modusponens.js"></script>

	<!-- algoritma dibawah adalah modus Tollens ==================== -->
	<script>
	function modusTollens(premis1, premis2){
		document.getElementById("premis1").innerHTML = premis1;
		document.getElementById("premis2").innerHTML = premis2;
		if(modusPonensGetQ(premis1) == premis2 && isNegasiP(premis2)){
			document.getElementById("konklusi").innerHTML = modusTollensIsPNegasi(premis1);
		}else{
			document.getElementById("konklusi").innerHTML = "Tidak Valid!";
		}
	}

	function modusTollensGetP2(premis1, premis2){
		var mark=0; var key1='tidak benar '; var key2=' tidak ';
		var 

		for(var i=0; i<strQ.length; i++){
			for(var j=0; j<key1.length; j++){
				if(strQ.charAt(i+j) == key1.charAt(j)){
					console.log(strQ.charAt(i+j) + ' ' + key1.charAt(j) + ' ' + mark + ' ' + key1.length);
					mark++;
				}else{
					mark=0;
					break;
				}
				if(mark == key1.length){
					return true;
				}
			}
		}
		return false;
	}

	//sebuah fungsi untuk mengecek apakah 'premis 2' mengandung 'tidak'
	function modusTollensIsPNegasi(premis2){
		var mark=0; var key1='tidak ';
		var strQ = modusPonensGetQ(premis2);
		
		for(var i=0; i<strQ.length; i++){
			for(var j=0; j<key1.length; j++){
				if(strQ.charAt(i+j) == key1.charAt(j)){
					//console.log(strQ.charAt(i+j) + ' ' + key1.charAt(j) + ' ' + mark + ' ' + key1.length);
					mark++;
				}else{
					mark=0;
					break;
				}
				if(mark == key1.length){
					return true;
				}
			}
		}
		return false;
	}

	//sebuah fungsi untuk mengekstrak 'p' dari 'premis 1'
	function modusTollensGetP(premis1){
		var mark=0; 
		var key1='jika '; var key2=' maka ';
		var startStr=0; var endStr=0;
		
		//algoritma untuk menentukan awal 'p' tanpa 'jika'
		for(var i=0; i<premis1.length; i++){
			for(var j=0; j<key1.length; j++){
				if(premis1.charAt(i+j) == key1.charAt(j)){
					//console.log(premis1.charAt(i+j) + ' ' + key1.charAt(j) + ' ' + mark + ' ' + key1.length);
					mark++;
				}else{
					mark=0;
					break;
				}
				if(mark == key1.length){
					startStr = mark;
				}
			}
		}
		//console.log(startStr + ' ' + endStr); //debug_line_can_be_removed
		
		//algoritma untuk menentukan akhir 'p'
		mark=0;
		for(var i=0; i<premis1.length; i++){
			for(var j=0; j<key2.length; j++){
				if(premis1.charAt(i+j) == key2.charAt(j)){
					mark++;
				}else{
					mark=0;
					break;
				}
				if(mark == key2.length){
					endStr = i;
				}
			}
		}
		//console.log(startStr + ' ' + endStr + ' ' + i); //debug_line_can_be_removed
		
		if(endStr < premis1.length){
			//console.log(premis1.slice(startStr, endStr)); //debug_line_can_be_removed
			return premis1.slice(startStr, endStr);
		}else{
			return 'NULL!';
		}
	}

	//sebuah fungsi untuk mengekstrak 'q' dari 'premis 1'
	function modusTollensGetQ(premis1){
		var mark; var key=' maka ';
		var startStr=0; var endStr=premis1.length;
		
		for(var i=0; i<premis1.length; i++){
			for(var j=0; j<key.length; j++){
				if(premis1.charAt(i+j) == key.charAt(j)){
					mark++;
				}else{
					mark=0;
					break;
				}
				if(mark == key.length){
					startStr = i+key.length;
				}
			}		
		}
		if(startStr < premis1.length){
			//console.log(premis1.slice(i + key.length, premis1.length)); //debug_line_can_be_removed
			return premis1.slice(startStr, endStr);
		}
	}
	
	function modusTollensNegasiP(premis1){
		var hasilP='Tidak Benar ';
		return hasilP + modusTollensGetP(premis1);
	}
	</script>

	</body>
</html> 

